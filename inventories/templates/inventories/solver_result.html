{% extends 'admin/base_site.html' %}
{% load i18n admin_urls admin_static admin_list %}

{% block breadcrumbs %}
    <div class="breadcrumbs">
        <a href="{% url 'admin:index' %}">{% trans 'Home' %}</a>
        &rsaquo;
        <a href="{% url 'solver' %}">Solver de productos</a>
        &rsaquo; Detalle
    </div>
{% endblock %}

{#{% block extrastyle %}#}
{#    {{ block.super }}#}
{#    <link rel="stylesheet" type="text/css" href="{% static "inventories/css/inventory.css" %}"/>#}
{#    <link rel="stylesheet" type="text/css"#}
{#          href="https://cdn.datatables.net/t/dt/jqc-1.12.0,jszip-2.5.0,pdfmake-0.1.18,dt-1.10.11,b-1.1.2,b-html5-1.1.2,b-print-1.1.2,se-1.1.2/datatables.min.css"/>#}
{#{% endblock %}#}

{#{% block extrascripts %}#}
{#    <script>#}
{#        var PRODUCT_INV_ITEM_API_URL = APP_DOMAIN + "{{ product_inv_item_api_url }}";#}
{#    </script>#}
{#    <script type="text/javascript"#}
{#            src="https://cdn.datatables.net/t/dt/jqc-1.12.0,jszip-2.5.0,pdfmake-0.1.18,dt-1.10.11,b-1.1.2,b-html5-1.1.2,b-print-1.1.2,se-1.1.2/datatables.min.js"></script>#}
{#    <script type="text/javascript" src="{% static "inventories/scripts/inventory.js" %}"></script>#}
{#{% endblock %}#}

{% block content %}
    <div id="content-main">
        <h2>Corte solicitado</h2>
        <table>
            <thead>
            <th>Anchura (m)</th>
            <th>Longitud (m)</th>
            <th>Cantidad</th>
            <th>Líneas</th>
            </thead>
            <tbody>
            <tr>
                <td>{{ width }}</td>
                <td>{{ length }}</td>
                <td>{{ quantity }}</td>
                <td>{{ product_lines }}</td>
            </tr>
            </tbody>
        </table>
        {% if products %}
            <h2>Resultados para inventario: {{ inventory }}</h2>
            {% if remaining|length > 0 %}
                <h3>No se encontraron suficientes productos para cumplir con la petición. Sólo se pueden
                    generar {{ quantity|subtract:remaining }} de {{ quantity }}.</h3>
            {% endif %}
            <table>
                <thead>
                <th>Producto</th>
                <th>Cantidad actual</th>
                <th>Cantidad restante</th>
                <th>Orientación del corte</th>
                <th>Estándar más cercano</th>
                <th>Medidas del residuo</th>
                </thead>
                <tbody>
                {% for result in products %}
                    <tr>
                        <td>{{ result.product_item.product }}</td>
                        <td>{{ result.product_item.quantity }}</td>
                        <td>{{ result.product_remaining }}</td>
                        <td>{{ result.conf }}</td>
                        <td>{{ result.closest_standard.standard }}</td>
                        <td>{{ result.residue }}</td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        {% else %}
            <h2>No se encontraron resultados para ese corte en el inventario: {{ inventory }}</h2>
        {% endif %}
    </div>
{% endblock %}